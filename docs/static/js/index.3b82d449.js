(()=>{"use strict";var e={758:function(e,t,n){let a,o;var r,l,i=n(313);let s=(0,i.qj)({localFonts:[],localFont:"",localFamily:"",unavailableFonts:[],unicodeRange:"",loading:null,font:null,sample:"",glyphs:"",subsetMode:"exclude",previewSize:12,running:!1,message:null,url:null,download:null,previewIndex:0,version:"",features:{},variations:{},options:{suffix:"",keepVar:!1,family:"",subfamily:"",typo_family:"",typo_subfamily:"",fixContour:!1,singleSub:!0,customNames:!1,target:"",format:"ttf"}}),f=new Set;fetch("sample.txt").then(e=>e.text()).then(e=>s.sample=e),fetch("https://img.shields.io/github/package-json/v/mutsuntsai/fontfreeze.json").then(e=>e.json()).then(e=>s.version=" "+e.value);let u=new Worker(new URL(n.p+n.u("192"),n.b),Object.assign({},{name:"worker"},{type:void 0})),c=new Promise((e,t)=>{let n=a=>{"initialized"==a.data?(u.removeEventListener("message",n),e()):"error"in a.data?t(Error(a.data.error)):"progress"in a.data&&s.loading&&(s.loading=`packages (${a.data.progress}%)`)};u.addEventListener("message",n)});function d(e,t){return new Promise((n,a)=>{let o=new MessageChannel;u.postMessage([e,t],[o.port2]),o.port1.onmessage=e=>{let{success:t,data:o}=e.data;t?n(o):a(Error(o))}})}let m=["abvm","abvs","akhn","blwf","blwm","blws","ccmp","cfar","cjct","curs","dist","dtls","fin2","fin3","fina","flac","half","haln","init","isol","ljmo","locl","ltra","ltrm","mark","med2","medi","mkmk","nukt","pref","pres","pstf","psts","rclt","rkrf","rlig","rphf","rtla","rtlm","rvrn","ssty","stch","tjmo","vjmo","DELT"],g={ttf:{description:"TTF font",accept:{"font/ttf":".ttf"}},woff2:{description:"WOFF2 font",accept:{"font/woff2":".woff2"}}},p={ital:"Italic",opsz:"Optical size",slnt:"Slant",wdth:"Width",wght:"Weight"},v="Please try re-exporting the font with editors such as FontForge and see if it fixes the issue. If it still doesn't, please submit an issue.",y=document.createElement("style");async function h(e,t){if(!await w(e)){if(!t.preview)try{let e=await d("legacy");if(await w(e))return}catch(e){console.log(e)}gtag("event","preview_failed"),alert("Font preview won't work for this font. "+v)}}function w(e){o&&URL.revokeObjectURL(o),o=e;let t=y.sheet;return t.cssRules.length>0&&t.deleteRule(0),new Promise(e=>{document.fonts.onloadingdone=t=>{e(t.fontfaces.length>0)},t.insertRule(`@font-face {font-family: preview${++s.previewIndex};src: url('${o}');}`)})}document.head.appendChild(y);var b=n(271);let x=e=>b.u_.getOrCreateInstance(e);function F(e){return JSON.parse(JSON.stringify(e))}async function k(e){gtag("event","open_ttf");try{await S(e,e.name)}catch(t){console.log(t),alert(`"${e.name}" is not a valid font file, or is corrupted. `+v)}}async function S(e,t){let n;s.loading="packages",await c,s.loading="font";let o=URL.createObjectURL(e);try{n=await d("open",o)}catch(e){throw URL.revokeObjectURL(o),s.loading=null,e}console.log(F(n)),n.preview&&(URL.revokeObjectURL(o),o=n.previewUrl),n.fileName=t,n.fileSize=(r=e.size)<1024?r+"B":(r/=1024)<1024?r.toFixed(1)+"KiB":(r/=1024).toFixed(1)+"MiB",n.gsub=n.gsub.filter(e=>!m.includes(e)),s.variations={},s.glyphs="",s.options={suffix:"Freeze",family:n.family,keepVar:!1,subfamily:n.subfamily,typo_family:n.typo_family||n.family,typo_subfamily:n.typo_subfamily||"",fixContour:!1,singleSub:!0,customNames:!1,target:"calt",format:"ttf"};var r,l=n.gsub;if(!function(e){if(e.length!=f.size)return!1;for(let t of e)if(!f.has(t))return!1;return!0}(l))for(let e of(f.clear(),s.features={},a={},l))f.add(e),s.features[e]=a[e]=!1;if(n.fvar)for(let e of n.fvar.axes)s.variations[e.tag]=e.default;s.font=n,await h(o,n),s.loading=null}let O=document.createElement("style");async function j(){gtag("event","show_local"),await navigator.permissions.query({name:"local-fonts"});let e=await window.queryLocalFonts();0!=e.length&&(function(e){let t=O.sheet;for(;t.cssRules.length;)t.deleteRule(0);for(let n of e)t.insertRule(`@font-face { font-family: 'local ${n.fullName}'; src: local('${n.fullName}'), local('${n.postscriptName}');}`)}(e),s.localFonts=e,x("#local").show())}async function R(){let e;gtag("event","open_local");let t=s.localFonts[s.localFont];try{e=await t.blob()}catch(e){e instanceof Error&&alert("An error occur: "+e.message),s.unavailableFonts.push(t.postscriptName);return}finally{s.localFamily="",s.localFont=""}x("#local").hide();try{await S(e,t.fullName)}catch(e){e instanceof Error&&alert("An error occur: "+e.message)}}function E(){let e=function(){let e=new Set;for(let t=0;t<s.glyphs.length;t++){let n=s.glyphs.codePointAt(t);s.glyphs.charCodeAt(t)!=n&&t++,e.add(n)}let t=[...e];return t.sort((e,t)=>e-t),t}();if("exclude"==s.subsetMode){let t=[[0,1114111]];if(0==e.length)return"";for(let n of e){let e=t.find(e=>e[0]<=n&&n<=e[1]);if(!e)continue;let a=e[1];e[1]=n-1,t.push([n+1,a])}return t.filter(e=>e[0]<=e[1]).map(L).join(", ").toUpperCase()}{if(0==e.length)return"U+0";let t=[],n=e[0],a=n;for(let o=1;o<=e.length;o++){let r=e[o];a==r-1||(t.push([n,a]),n=r),a=r}return t.map(L).join(", ").toUpperCase()}}function L(e){let t="U+"+e[0].toString(16);return e[1]>e[0]&&(t+="-"+e[1].toString(16)),t}function N(e,t){let n=window.getSelection(),a=e.textContent,o=Math.min(n.focusOffset,n.anchorOffset),r=Math.max(n.focusOffset,n.anchorOffset),l=a.substring(r);""==l&&(l="\n"),e.textContent=a.substring(0,o)+t+l,n.removeAllRanges();let i=document.createRange();i.setStart(e.childNodes[0],o+t.length),i.setEnd(e.childNodes[0],o+t.length),n.addRange(i)}async function _(){if(!s.message){gtag("event","save_"+s.options.format);try{if("showSaveFilePicker"in window){s.message=null;let e=await showSaveFilePicker({suggestedName:$(),types:[g[s.options.format]]});await C();let t=await z(),n=await fetch(t),a=await n.arrayBuffer(),o=new Blob([a],{type:"font/"+s.options.format}),r=await e.createWritable();await r.write(o),await r.close(),s.message="Generating complete!",setTimeout(()=>s.message=null,3e3)}else await C(),s.url=await z(),s.download=$()}catch(e){console.log(e)}s.running=!1}}function C(){let e=new Promise(e=>{addEventListener("animationstart",e,{once:!0})});return s.running=!0,e}function $(){return s.font.fileName.replace(/\.[a-z0-9]+$/i,"")+"_freeze."+s.options.format}async function z(){try{if(!s.font)throw Error();for(let e in s.variations)s.variations[e]=Number(s.variations[e]);s.options.family=s.options.family.trim(),s.options.typo_subfamily=s.options.typo_subfamily.trim();let e=F(s.options);e.suffix&&(e.family&&e.family.length+e.suffix.length<32&&(e.family+=" "+e.suffix),e.typo_family&&(e.typo_family+=" "+e.suffix));let t={options:e,version:s.version,unicodes:E(),variations:s.variations,features:s.font.gsub.filter(e=>!0===s.features[e]),disables:s.font.gsub.filter(e=>void 0===s.features[e])};return await d("save",F(t))}catch(e){throw e instanceof Error&&alert("An error occur: "+e.message),e}}document.head.appendChild(O);let U=document.querySelector(".dropzone"),P=(e,t)=>{e.stopPropagation(),e.preventDefault(),U.classList.toggle("drag",t)};document.body.addEventListener("dragover",e=>P(e,!0)),U.addEventListener("dragleave",e=>P(e,!1)),U.addEventListener("drop",e=>{P(e,!1);let t=[...e.dataTransfer.items].find(e=>"file"==e.kind);t&&k(t.getAsFile())}),(0,i.ri)({chromiumVersion:parseInt((null==(l=navigator.userAgentData)||null==(r=l.brands.find(e=>"Chromium"==e.brand))?void 0:r.version)??0),localFontSupport:"queryLocalFonts"in window,store:s,get previewStyle(){if(!s.font)return null;let e=s.font.gsub.filter(e=>!1!==s.features[e]).map(e=>`'${e}' ${s.features[e]?"on":"off"}`).join(","),t=s.font.fvar?s.font.fvar.axes.map(e=>`'${e.tag}' ${s.variations[e.tag]}`).join(","):"normal";return`white-space: pre-line;font-family: preview${s.previewIndex};font-feature-settings: ${e};font-variation-settings: ${t};font-size: ${s.previewSize}pt;`},get more(){let e=s.font;if(!e)return!1;return e.description||e.designer||e.manufacturer||e.copyright||e.trademark},get instances(){if(!s.font||!s.font.fvar)return[];return s.font.fvar.instances},get axes(){if(!s.font||!s.font.fvar)return[];return s.font.fvar.axes},get localFamilies(){if(!s.localFonts.length)return[];let e=new Set;for(let t of s.localFonts)e.add(t.family);return[...e]},getAxisName:e=>e.name?e.name:e.tag in p?p[e.tag]:e.tag,setInstance(e){for(let t in s.options.typo_subfamily=e.name,e.coordinates)s.variations[t]=e.coordinates[t]},getStep(e){let t=e.max-e.min;return t>20?1:t>1?.1:.01},clear(){let e=document.getElementsByTagName("select")[0];e&&(e.value="")},checkboxChange:function(e){!0===a[e]&&(s.features[e]=void 0),void 0===a[e]&&(s.features[e]=!1),a[e]=s.features[e]},info(){x("#info").show()},setUnicodeRange(){var e;e=s.unicodeRange=E(),y.sheet.cssRules[0].style.unicodeRange=e},optionStyle(e){if(!e){if(""===s.localFont)return"";e=s.localFonts[s.localFont]}return`font-family:'local ${e.fullName}'`},familyStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.localFamily,t=s.localFonts.filter(t=>t.family==e);if(!t.length)return"";let n=t.find(e=>"Regular"==e.style);return n||(t.sort((e,t)=>e.fullName.length-t.fullName.length),n=t[0]),`font-family:'local ${n.fullName}'`},familyChange(){s.localFont=s.localFonts.findIndex(e=>e.family==s.localFamily)},setupDiv(){let e=document.querySelector("div.pre");if(function(e){try{let t="plaintext-only";return e.contentEditable=t,e.contentEditable==t}catch(e){return!1}}(e))e.innerText=s.sample;else e.contentEditable="true",e.addEventListener("keydown",t=>{13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),N(e,"\n"))}),e.addEventListener("paste",t=>{t.preventDefault(),N(e,(t.originalEvent||t).clipboardData.getData("text/plain"))}),e.textContent=s.sample},local:j,loadLocal:R}).mount(),globalThis.generate=_,globalThis.openFile=async function(e){let t=e.files[0];t&&(e.value="",k(t))}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.u=e=>"static/js/async/worker.391fbb31.js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=(t,a,o,r)=>{if(a){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,o,r];return}for(var i=1/0,l=0;l<e.length;l++){for(var[a,o,r]=e[l],s=!0,f=0;f<a.length;f++)(!1&r||i>=r)&&Object.keys(n.O).every(e=>n.O[e](a[f]))?a.splice(f--,1):(s=!1,r<i&&(i=r));if(s){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}})(),n.p="/fontfreeze/",n.rv=()=>"1.3.9",(()=>{n.b=document.baseURI||self.location.href;var e={980:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[l,i,s]=a,f=0;if(l.some(t=>0!==e[t])){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(s)var u=s(n)}for(t&&t(a);f<l.length;f++)r=l[f],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=self.webpackChunkfontfreeze=self.webpackChunkfontfreeze||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.ruid="bundler=rspack@1.3.9";var a=n.O(void 0,["104"],function(){return n(758)});a=n.O(a)})();