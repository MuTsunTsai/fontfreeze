(()=>{"use strict";var e={491:function(e,t,n){let a,o;var r,l,i=n(313),s=n(271);let f=(0,i.qj)({localFonts:[],localFont:"",localFamily:"",unavailableFonts:[],unicodeRange:"",loading:null,font:null,sample:"",glyphs:"",subsetMode:"exclude",previewSize:12,running:!1,message:null,previewIndex:0,version:""});fetch("sample.txt").then(e=>e.text()).then(e=>f.sample=e),fetch("https://img.shields.io/github/package-json/v/mutsuntsai/fontfreeze.json").then(e=>e.json()).then(e=>f.version=" "+e.value);let c=new Worker(new URL(n.p+n.u("120"),n.b)),u=new Promise((e,t)=>{let n=a=>{"initialized"==a.data?(c.removeEventListener("message",n),e()):"error"in a.data?t(Error(a.data.error)):"progress"in a.data&&f.loading&&(f.loading=`packages (${a.data.progress}%)`)};c.addEventListener("message",n)});function d(e,t){return new Promise((n,a)=>{let o=new MessageChannel;c.postMessage([e,t],[o.port2]),o.port1.onmessage=e=>{let{success:t,data:o}=e.data;t?n(o):a(Error(o))}})}let g=document.createElement("style");function m(e){a&&URL.revokeObjectURL(a),a=e;let t=g.sheet;return t.cssRules.length>0&&t.deleteRule(0),new Promise(e=>{document.fonts.onloadingdone=t=>{e(t.fontfaces.length>0)},t.insertRule(`@font-face {font-family: preview${++f.previewIndex};src: url('${a}');}`)})}document.head.appendChild(g);let p=document.createElement("style");function v(){let e=function(){let e=new Set;for(let t=0;t<f.glyphs.length;t++){let n=f.glyphs.codePointAt(t);f.glyphs.charCodeAt(t)!=n&&t++,e.add(n)}let t=[...e];return t.sort((e,t)=>e-t),t}();if("exclude"==f.subsetMode){let t=[[0,1114111]];if(0==e.length)return"";for(let n of e){let e=t.find(e=>e[0]<=n&&n<=e[1]);if(!e)continue;let a=e[1];e[1]=n-1,t.push([n+1,a])}return t.filter(e=>e[0]<=e[1]).map(y).join(", ").toUpperCase()}{if(0==e.length)return"U+0";let t=[],n=e[0],a=n;for(let o=1;o<=e.length;o++){let r=e[o];a==r-1||(t.push([n,a]),n=r),a=r}return t.map(y).join(", ").toUpperCase()}}function y(e){let t="U+"+e[0].toString(16);return e[1]>e[0]&&(t+="-"+e[1].toString(16)),t}function h(e,t){let n=window.getSelection(),a=e.textContent,o=Math.min(n.focusOffset,n.anchorOffset),r=Math.max(n.focusOffset,n.anchorOffset),l=a.substring(r);""==l&&(l="\n"),e.textContent=a.substring(0,o)+t+l,n.removeAllRanges();let i=document.createRange();i.setStart(e.childNodes[0],o+t.length),i.setEnd(e.childNodes[0],o+t.length),n.addRange(i)}document.head.appendChild(p);let w=["abvm","abvs","akhn","blwf","blwm","blws","ccmp","cfar","cjct","curs","dist","dtls","fin2","fin3","fina","flac","half","haln","init","isol","ljmo","locl","ltra","ltrm","mark","med2","medi","mkmk","nukt","pref","pres","pstf","psts","rclt","rkrf","rlig","rphf","rtla","rtlm","rvrn","ssty","stch","tjmo","vjmo","DELT"],b={ital:"Italic",opsz:"Optical size",slnt:"Slant",wdth:"Width",wght:"Weight"},F={ttf:{description:"TTF font",accept:{"font/ttf":".ttf"}},woff2:{description:"WOFF2 font",accept:{"font/woff2":".woff2"}}},x="Please try re-exporting the font with editors such as FontForge and see if it fixes the issue. If it still doesn't, please submit an issue.",k=e=>s.u_.getOrCreateInstance(e),S=document.querySelector(".dropzone"),O=(e,t)=>{e.stopPropagation(),e.preventDefault(),S.classList.toggle("drag",t)};function R(){let e=new Promise(e=>{addEventListener("animationstart",e,{once:!0})});return f.running=!0,e}function j(){return f.font.fileName.replace(/\.[a-z0-9]+$/i,"")+"_freeze."+f.options.format}function L(e){return JSON.parse(JSON.stringify(e))}async function E(){try{for(let e in f.variations)f.variations[e]=Number(f.variations[e]);f.options.family=f.options.family.trim(),f.options.typo_subfamily=f.options.typo_subfamily.trim();let e=L(f.options);e.suffix&&(e.family&&e.family.length+e.suffix.length<32&&(e.family+=" "+e.suffix),e.typo_family&&(e.typo_family+=" "+e.suffix));let t={options:e,version:f.version,unicodes:v(),variations:f.variations,features:f.font.gsub.filter(e=>!0===f.features[e]),disables:f.font.gsub.filter(e=>void 0===f.features[e])};return await d("save",L(t))}catch(e){throw alert("An error occur: "+e.message),e}}async function N(e){gtag("event","open_ttf");try{await $(e,e.name)}catch(t){console.log(t),alert(`"${e.name}" is not a valid font file, or is corrupted. `+x)}}async function $(e,t){var n;let a;f.loading="packages",await u,f.loading="font";let r=URL.createObjectURL(e);try{a=await d("open",r)}catch(e){throw URL.revokeObjectURL(r),f.loading=null,e}for(let l of(console.log(L(a)),a.preview&&(URL.revokeObjectURL(r),r=a.preview),a.fileName=t,a.fileSize=(n=e.size)<1024?n+"B":(n/=1024)<1024?n.toFixed(1)+"KiB":(n/=1024).toFixed(1)+"MiB",a.gsub=a.gsub.filter(e=>!w.includes(e)),f.features={},o={},f.variations={},f.glyphs="",f.options={suffix:"Freeze",family:a.family,keepVar:!1,subfamily:a.subfamily,typo_family:a.typo_family||a.family,typo_subfamily:a.typo_subfamily||"",fixContour:!1,singleSub:!0,customNames:!1,target:"calt",format:"ttf"},a.gsub))f.features[l]=o[l]=!1;if(a.fvar)for(let e of a.fvar.axes)f.variations[e.tag]=e.default;f.font=a,await _(r),f.loading=null}async function _(e){if(!await m(e)){if(!info.preview)try{let e=await d("legacy");if(await m(e))return}catch(e){console.log(e)}gtag("event","preview_failed"),alert("Font preview won't work for this font. "+x)}}document.body.addEventListener("dragover",e=>O(e,!0)),S.addEventListener("dragleave",e=>O(e,!1)),S.addEventListener("drop",e=>{O(e,!1);let t=[...e.dataTransfer.items].find(e=>"file"==e.kind);t&&N(t.getAsFile())}),(0,i.ri)({chromiumVersion:parseInt((null==(l=navigator.userAgentData)||null==(r=l.brands.find(e=>"Chromium"==e.brand))?void 0:r.version)??0),localFontSupport:"queryLocalFonts"in window,store:f,get previewStyle(){if(!f.font)return null;let e=f.font.gsub.filter(e=>!1!==f.features[e]).map(e=>`'${e}' ${f.features[e]?"on":"off"}`).join(","),t=f.font.fvar?f.font.fvar.axes.map(e=>`'${e.tag}' ${f.variations[e.tag]}`).join(","):"normal";return`white-space: pre-line;font-family: preview${f.previewIndex};font-feature-settings: ${e};font-variation-settings: ${t};font-size: ${f.previewSize}pt;`},get more(){let e=f.font;if(!e)return!1;return e.description||e.designer||e.manufacturer||e.copyright||e.trademark},get instances(){if(!f.font||!f.font.fvar)return[];return f.font.fvar.instances},get axes(){if(!f.font||!f.font.fvar)return[];return f.font.fvar.axes},get localFamilies(){if(!f.localFonts.length)return[];let e=new Set;for(let t of f.localFonts)e.add(t.family);return[...e]},getAxisName:e=>e.name?e.name:e.tag in b?b[e.tag]:e.tag,setInstance(e){for(let t in f.options.typo_subfamily=e.name,e.coordinates)f.variations[t]=e.coordinates[t]},getStep(e){let t=e.max-e.min;return t>20?1:t>1?.1:.01},clear(){let e=document.getElementsByTagName("select")[0];e&&(e.value="")},checkboxChange(e){!0===o[e]&&(f.features[e]=void 0),void 0===o[e]&&(f.features[e]=!1),o[e]=f.features[e]},info(){k("#info").show()},setUnicodeRange(){var e;e=f.unicodeRange=v(),g.sheet.cssRules[0].style.unicodeRange=e},optionStyle(e){if(!e){if(""===f.localFont)return"";e=f.localFonts[f.localFont]}return`font-family:'local ${e.fullName}'`},familyStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.localFamily,t=f.localFonts.filter(t=>t.family==e);if(!t.length)return"";let n=t.find(e=>"Regular"==e.style);return n||(t.sort((e,t)=>e.fullName.length-t.fullName.length),n=t[0]),`font-family:'local ${n.fullName}'`},familyChange(){f.localFont=f.localFonts.findIndex(e=>e.family==f.localFamily)},setupDiv(){let e=document.querySelector("div.pre");if(function(e){try{let t="plaintext-only";return e.contentEditable=t,e.contentEditable==t}catch(e){return!1}}(e))e.innerText=f.sample;else e.contentEditable="true",e.addEventListener("keydown",t=>{13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),h(e,"\n"))}),e.addEventListener("paste",t=>{t.preventDefault(),h(e,(t.originalEvent||t).clipboardData.getData("text/plain"))}),e.textContent=f.sample},async local(){gtag("event","show_local"),await navigator.permissions.query({name:"local-fonts",description:""});let e=await window.queryLocalFonts();if(0!=e.length){let t=p.sheet;for(;t.cssRules.length;)t.deleteRule(0);for(let n of e)t.insertRule(`@font-face { font-family: 'local ${n.fullName}'; src: local('${n.fullName}'), local('${n.postscriptName}');}`);f.localFonts=e,k("#local").show()}},async loadLocal(){let e;gtag("event","open_local");let t=f.localFonts[f.localFont];try{e=await t.blob()}catch(e){alert("An error occur: "+e.message),f.unavailableFonts.push(t.postscriptName);return}finally{f.localFamily="",f.localFont=""}k("#local").hide();try{await $(e,t.fullName)}catch(e){alert("An error occur: "+e.message)}}}).mount(),globalThis.generate=async function(){if(!f.message){gtag("event","save_"+f.options.format);try{if("showSaveFilePicker"in window){f.message=null;let e=await showSaveFilePicker({suggestedName:j(),types:[F[f.options.format]]});await R();let t=await E(),n=await fetch(t),a=await n.arrayBuffer(),o=new Blob([a],{type:"font/"+f.options.format}),r=await e.createWritable();await r.write(o),await r.close(),f.message="Generating complete!",setTimeout(()=>f.message=null,3e3)}else await R(),f.url=await E(),f.download=j()}catch(e){console.log(e)}f.running=!1}},globalThis.openFile=async function(e){let t=e.files[0];t&&(e.value="",N(t))}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.u=e=>"static/js/async/"+e+".87924f19.js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=(t,a,o,r)=>{if(a){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,o,r];return}for(var i=1/0,l=0;l<e.length;l++){for(var[a,o,r]=e[l],s=!0,f=0;f<a.length;f++)(!1&r||i>=r)&&Object.keys(n.O).every(e=>n.O[e](a[f]))?a.splice(f--,1):(s=!1,r<i&&(i=r));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}})(),n.p="/fontfreeze/",n.rv=()=>"1.3.7",(()=>{n.b=document.baseURI||self.location.href;var e={980:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[l,i,s]=a,f=0;if(l.some(t=>0!==e[t])){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(s)var c=s(n)}for(t&&t(a);f<l.length;f++)r=l[f],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self.webpackChunkfontfreeze=self.webpackChunkfontfreeze||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.ruid="bundler=rspack@1.3.7";var a=n.O(void 0,["104"],function(){return n(491)});a=n.O(a)})();